{% extends "qa/base.html" %}
{% block title %}Moderator Dashboard{% endblock %}

{% block content %}
<h2>Moderator Dashboard</h2>

<h3>Unapproved Questions</h3>
<ul class="list-group mb-4">
    {% for question in unapproved_questions %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            <strong>{{ question.title }}</strong> by {{ question.author.username }}
            <br>
            <small>Posted on {{ question.created_at|date:"Y-m-d H:i" }}</small>
        </div>
        <div>
            <a href="{% url 'question-detail' question.pk %}" class="btn btn-sm btn-info">View</a>
            <a href="{% url 'approve-question' question.pk %}" class="btn btn-sm btn-success">Approve</a>
            <a href="{% url 'unapprove-question' question.pk %}" class="btn btn-sm btn-warning">Unapprove</a>
            <a href="{% url 'moderator-question-edit' question.pk %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'question-delete' question.pk %}" class="btn btn-sm btn-danger">Delete</a>
            
        </div>
    </li>
    {% empty %}
    <li class="list-group-item">No unapproved questions.</li>
    {% endfor %}
</ul>

<h3>Unapproved Answers</h3>
<ul class="list-group">
    {% for answer in unapproved_answers %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            On question: <a href="{% url 'question-detail' answer.question.pk %}">{{ answer.question.title }}</a><br>
            "{{ answer.body|truncatewords:15 }}" â€” by {{ answer.author.username }}<br>
            <small>Posted on {{ answer.created_at|date:"Y-m-d H:i" }}</small>
        </div>
        <div>
            <a href="{% url 'approve-answer' answer.pk %}" class="btn btn-sm btn-success">Approve</a>
            <a href="{% url 'unapprove-answer' answer.pk %}" class="btn btn-sm btn-warning">Unapprove</a>
            <a href="{% url 'moderator-answer-edit' answer.pk %}" class="btn btn-sm btn-primary">Edit</a>
            
            <a href="{% url 'moderator-answer-delete' answer.pk %}" class="btn btn-sm btn-danger">Delete</a>
        </div>
    </li>
    {% empty %}
    <li class="list-group-item">No unapproved answers.</li>
    {% endfor %}
</ul>

{% endblock %}
